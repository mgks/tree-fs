# tree-fs

**tree-fs** is a tiny, zero-dependency Node.js utility that turns text-based directory trees into physical files and folders.

It is designed to be the **standard "Paste & Go" receiver for AI-generated code**.

  <a href="https://www.npmjs.com/package/tree-fs"><img src="https://img.shields.io/npm/v/tree-fs.svg?style=flat-square&color=007acc" alt="npm version"></a>
  <a href="https://www.npmjs.com/package/tree-fs"><img src="https://img.shields.io/npm/dt/tree-fs.svg?style=flat-square&color=success" alt="npm downloads"></a>
  <a href="https://github.com/mgks/tree-fs/blob/main/LICENSE"><img src="https://img.shields.io/github/license/mgks/tree-fs.svg?style=flat-square&color=blue" alt="license"></a>
  <a href="https://github.com/mgks/tree-fs/stargazers"><img src="https://img.shields.io/github/stars/mgks/tree-fs?style=flat-square&logo=github" alt="stars"></a>

## âš¡ Why tree-fs?

<p align="">
  <img src="https://github.com/mgks/tree-fs/blob/main/preview.gif?raw=true" width="720">
</p>

LLMs (ChatGPT, Claude, DeepSeek) are great at planning architectures but bad at executing them.
They often output this:

```bash
my-app
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ index.js
â”‚   â””â”€â”€ utils.js
â””â”€â”€ README.md
```

Copying that structure manually is tedious. **tree-fs** makes it instant.

### Features
*   **AI Compatible:** Strips comments (`# entry point`) and handles weird Markdown formatting.
*   **Deterministic:** Same text input = same file structure. Always.
*   **Safe:** Never overwrites existing files by default.
*   **Smart:** Distinguishes `v1.0` (folder) from `v1.0.js` (file) automatically.
*   **Zero Dependencies:** Installs in seconds.

## ðŸš€ Usage

### 1. Interactive Mode (The "Paste" Workflow)

Perfect for when ChatGPT gives you a project structure.

```bash
npx tree-fs
```
*(You don't even need to install it!)*

1.  Paste your tree.
2.  Press **Enter twice**.
3.  Done.

### 2. CLI with File Input

Generate structure from a text file saved in your repo.

```bash
tree-fs structure.txt
```

### 3. Programmatic API (For Tool Builders)

Embed `tree-fs` into your own CLIs, generators, or scripts.

```bash
npm install tree-fs
```

```javascript
const { parseTree, generateFS } = require("tree-fs")
const path = require("path")

const treeInput = `
backend-api
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ models/
â””â”€â”€ .env
`

// 1. Parse text into JSON AST
const tree = parseTree(treeInput)

// 2. Generate files at the target directory
generateFS(tree, path.resolve(__dirname, "./output"))

console.log("Structure created!")
```

## {} Syntax Guide & Robustness

tree-fs is built to handle the "messy reality" of text inputs.

### 1. Comments are ignored
Great for annotated AI outputs.
```bash
src
â”œâ”€â”€ auth.js  # Handles JWT tokens
â””â”€â”€ db.js    # Connection logic
```
*Result: Creates `auth.js` and `db.js`. Comments are stripped.*

### 2. Explicit Folders
If a name looks like a file but is actually a folder (e.g., version numbers), end it with a slash `/`.
```bash
api
â”œâ”€â”€ v1.5/     <-- Created as a folder
â””â”€â”€ v2.0/     <-- Created as a folder
```

### 3. Smart Nesting
If an item has children indented below it, it is **automatically treated as a folder**, even if it has a dot.
```bash
app
â””â”€â”€ v2.5            <-- Treated as folder because it has a child
    â””â”€â”€ migrator.js
```

### 4. Markdown & Symbols
We handle standard tree characters, ASCII art, and bullets.
```bash
project
- src
  + components
    > Header.jsx
* public
  - logo.png
```

### 5. Config Files
Known files without extensions are correctly identified as files.
*   `Dockerfile`, `Makefile`, `LICENSE`, `Procfile`, `.gitignore`, `Jenkinsfile`

### 6. Indicators & Comments
We strip out common markers used to highlight specific files in documentation.
```bash
project
â”œâ”€â”€ src/  <-- Working directory
â”œâ”€â”€ utils.js // Deprecated
â””â”€â”€ .env # Do not commit
```

*Result: Creates folder src and files utils.js, .env. All comments are ignored.*

### 7. Rich Text & Emojis
We automatically clean up "decorative" trees often generated by newer AI models (like Claude or GPT-4o), regardless of where the decoration is placed.

**It handles:**
*   **Leading/Trailing Emojis:** `ðŸ“ src`, `index.js ðŸš€`, `âœ¨ components âœ¨`
*   **Explanations:** `index.js (Core Logic)`, `main.py (Entry)`

```bash
my-project
â”œâ”€â”€ ðŸ“ src ðŸš€
â”‚   â”œâ”€â”€ main.js       (The Brain) ðŸ§ 
â”‚   â””â”€â”€ theme.css     (Dark Mode)
â””â”€â”€ ðŸ“„ package.json ðŸ“¦
```

*Result: Creates folder src and files main.js, theme.css, package.json.*

**Note:** Internal emojis (logo_ðŸ”¥.png) and filenames with parentheses (image(1).png) are preserved. We only strip "detached" decorations separated by spaces.

## ðŸ“¦ CI/CD Integration

You can use `tree-fs` to scaffold environments in GitHub Actions or pipelines.

```yaml
- name: Scaffold Directory
  run: npx tree-fs structure.txt
```

To test without writing files (Dry Run):
```bash
tree-fs structure.txt --dry-run
```

## License

MIT
